<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login, Register, and Dashboard</title>
    <link rel="stylesheet" href= "../Client/css/style.css">
</head>
<body>
    <div id="app">
        <!-- Navigation (Visible only on login/register pages) -->
        <nav id="auth-nav">
            <button onclick="showLogin()">Login</button>
            <button onclick="showRegister()">Register</button>
        </nav>

        <!-- Login Template -->
        <template id="loginPage">
            <div class="form-container">
                <h2>Login</h2>
                <form id="signup-form" onsubmit="loginUser(event)">
                    <input type="text" placeholder="Username" required>
                    <input type="password" placeholder="Password" required>
                    <button type="submit">Login</button>
                </form>
                <p id="login-message" class="message"></p>
            </div>
        </template>

        <!-- Register Template -->
        <template id="register-template">
            <div class="form-container">
                <h2>Register</h2>
                <form id="register-form" onsubmit="registerUser(event)">
                    <input type="text" placeholder="Username" required>
                    <input type="email" placeholder="Email" required>
                    <input type="password" placeholder="Password" required>
                    <input type="number" placeholder="Enter your age" required>
                    <label for="gender-toggle">Gender:</label>
                    <input type="checkbox" id="gender-toggle">
                    <label for="gender-toggle">Female</label>
                    <select name="fitnessGoal" required>
                        <option value="weightLoss">Weight Loss</option>
                        <option value="muscleGain">Muscle Gain</option>
                        <option value="endurance">Endurance</option>
                    </select>
                    <select name="membershipType" required>
                        <option value="basic">Basic</option>
                        <option value="premium">Premium</option>
                    </select>
                    <button type="submit">Register</button>
                </form>
                <p id="register-message" class="message"></p>
            </div>
        </template>

        <!-- Dashboard Template -->
        <template id="dashboard-template">
            <div class="dashboard-container">
                <h2>Welcome to Your Dashboard</h2>
                <p>Hello, <span id="username-display"></span>!</p>
                <button onclick="logoutUser()">Logout</button>
                <div id="workout-list"></div>
            </div>
        </template>

        <!-- Dynamic Content Area -->
        <div id="content"></div>
    </div>

    <script src="user.js"></script>
    <script>
        // Function to show the login form
        function showLogin() {
            const template = document.getElementById('loginPage');
            const clone = document.importNode(template.content, true);
            document.getElementById('content').innerHTML = '';
            document.getElementById('content').appendChild(clone);
            document.getElementById('auth-nav').style.display = 'block'; // Show auth navigation
        }

        // Function to show the registration form
        function showRegister() {
            const template = document.getElementById('register-template');
            const clone = document.importNode(template.content, true);
            document.getElementById('content').innerHTML = '';
            document.getElementById('content').appendChild(clone);
            document.getElementById('auth-nav').style.display = 'block'; // Show auth navigation
        }

        // Function to show the dashboard
        function showDashboard(username) {
            const template = document.getElementById('dashboard-template');
            const clone = document.importNode(template.content, true);
            document.getElementById('content').innerHTML = '';
            document.getElementById('content').appendChild(clone);
            document.getElementById('auth-nav').style.display = 'none'; // Hide auth navigation

            // Display the username on the dashboard
            document.getElementById('username-display').textContent = username;

            // Load workouts (if applicable)
            loadWorkouts();
        }

        // Check if the user is already logged in on page load
        document.addEventListener('DOMContentLoaded', () => {
            const currentUser = localStorage.getItem('currentUser');
            if (currentUser) {
                showDashboard(currentUser); // Show dashboard if logged in
            } else {
                showLogin(); // Show login form if not logged in
            }
        });
    </script>

    <script src="js/client.js"></script>
    <script src="js/network.js"></script>
    <script src="js/AuthServer.js"></script>
    <script src="js/DB.js"></script>
    <script src="js/user.js"></script>
    <script src="js/fajax.js"></script>
    <script src="js/server.js"></script>
</body>
</html>